From c9c378434208f24f92e95a5daf4d632f22a38cd4 Mon Sep 17 00:00:00 2001
From: Dmitry Shifrin <dmitry.shifrin@cogentembedded.com>
Date: Wed, 28 Oct 2015 10:49:14 +0300
Subject: [PATCH] add wifi bcmdhd

---
 arch/arm/boot/dts/r8a7745-skrzg1e.dts | 28 ++++++++++++++++++++--------
 1 file changed, 20 insertions(+), 8 deletions(-)

diff --git a/arch/arm/boot/dts/r8a7745-skrzg1e.dts b/arch/arm/boot/dts/r8a7745-skrzg1e.dts
index 622ee7b..f0d7c78 100644
--- a/arch/arm/boot/dts/r8a7745-skrzg1e.dts
+++ b/arch/arm/boot/dts/r8a7745-skrzg1e.dts
@@ -122,16 +122,13 @@
 	};
 
 	vccq_sdhi0: regulator@1 {
-		compatible = "regulator-gpio";
+		compatible = "regulator-fixed";
 
 		regulator-name = "SDHI0 VccQ";
 		regulator-min-microvolt = <1800000>;
-		regulator-max-microvolt = <3300000>;
+		regulator-max-microvolt = <1800000>;
 
-		gpios = <&gpio2 29 GPIO_ACTIVE_HIGH>;
-		gpios-states = <1>;
-		states = <3300000 1
-			  1800000 0>;
+		gpio = <&gpio2 29 GPIO_ACTIVE_HIGH>;
 	};
 
 	vcc_sdhi1: regulator@2 {
@@ -182,6 +179,21 @@
 		};
 	};
 
+	vcc_wifi0: regulator@0 {
+		compatible = "regulator-fixed";
+
+		regulator-name = "wlreg_on";
+	};
+
+	wifi: wifi@0 {
+		compatible = "android,bcmdhd_wlan";
+
+		gpios = <&gpio5 20 GPIO_ACTIVE_HIGH>;
+		vcc-supply = <&vcc_wifi0>;
+
+		status = "okay";
+	};
+
 	hdmi_transmitter: adv7511 {
 		compatible = "adi,adv7511";
 		gpios = <&gpio5 23 GPIO_ACTIVE_LOW>;
@@ -393,8 +405,8 @@
 
 	vmmc-supply = <&vcc_sdhi0>;
 	vqmmc-supply = <&vccq_sdhi0>;
-	cd-gpios = <&gpio6 6 GPIO_ACTIVE_LOW>;
-	wp-gpios = <&gpio6 7 GPIO_ACTIVE_HIGH>;
+	cd-gpios = <&gpio6 6 GPIO_ACTIVE_HIGH>;
+	wp-gpios = <&gpio6 7 GPIO_ACTIVE_LOW>;
 	status = "okay";
 };
 
-- 
1.9.1

