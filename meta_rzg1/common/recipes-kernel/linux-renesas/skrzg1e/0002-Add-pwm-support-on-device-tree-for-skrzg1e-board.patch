From 3f177c5b4658b1a0c56a4afa7082fc0c2f30e036 Mon Sep 17 00:00:00 2001
From: TungDang <tung.dang.jy@rvc.renesas.com>
Date: Fri, 16 Sep 2016 16:07:34 +0700
Subject: [PATCH 2/2] Add-pwm-support-on-device-tree-for-skrzg1e-board

Signed-off-by: TungDang <tung.dang.jy@rvc.renesas.com>
---
 arch/arm/boot/dts/r8a7745-skrzg1e.dts | 84 +++++++++++++++++++++++++++++++++++
 arch/arm/boot/dts/r8a7745.dtsi        | 55 +++++++++++++++++++++++
 2 files changed, 139 insertions(+)

diff --git a/arch/arm/boot/dts/r8a7745-skrzg1e.dts b/arch/arm/boot/dts/r8a7745-skrzg1e.dts
index 95176729..9ae3b38 100644
--- a/arch/arm/boot/dts/r8a7745-skrzg1e.dts
+++ b/arch/arm/boot/dts/r8a7745-skrzg1e.dts
@@ -254,6 +254,41 @@
		renesas,groups = "du1_rgb666", "du1_sync", "du1_disp", "du1_clk0_out";
		renesas,function = "du1";
	};
+
+        pwm0_pins: pwm0 {
+                renesas,groups = "pwm0";
+                renesas,function = "pwm0";
+        };
+
+        pwm1_pins: pwm1 {
+                renesas,groups = "pwm1";
+                renesas,function = "pwm1";
+        };
+
+        pwm2_pins: pwm2 {
+                renesas,groups = "pwm2";
+                renesas,function = "pwm2";
+        };
+
+        pwm3_pins: pwm3 {
+                renesas,groups = "pwm3";
+                renesas,function = "pwm3";
+        };
+
+        pwm4_pins: pwm4 {
+                renesas,groups = "pwm4";
+                renesas,function = "pwm4";
+        };
+
+        pwm5_pins: pwm5 {
+                renesas,groups = "pwm5";
+                renesas,function = "pwm5";
+        };
+
+        pwm6_pins: pwm6 {
+                renesas,groups = "pwm6";
+                renesas,function = "pwm6";
+        };
 };

 &scif2 {
@@ -492,3 +527,52 @@
	shared-pin;
 //	pio-transfer;
 };
+
+&pwm0 {
+        pinctrl-0 = <&pwm0_pins>;
+        pinctrl-names = "default";
+
+        status = "okay";
+};
+
+&pwm1 {
+//        pinctrl-0 = <&pwm1_pins>;
+//        pinctrl-names = "default";
+
+        status = "okay";
+};
+
+&pwm2 {
+//        pinctrl-0 = <&pwm2_pins>;
+//        pinctrl-names = "default";
+
+        status = "okay";
+};
+
+&pwm3 {
+//        pinctrl-0 = <&pwm3_pins>;
+//        pinctrl-names = "default";
+
+        status = "okay";
+};
+
+&pwm4 {
+//        pinctrl-0 = <&pwm4_pins>;
+//        pinctrl-names = "default";
+
+        status = "okay";
+};
+
+&pwm5 {
+//        pinctrl-0 = <&pwm5_pins>;
+//        pinctrl-names = "default";
+
+        status = "okay";
+};
+
+&pwm6 {
+//        pinctrl-0 = <&pwm6_pins>;
+//        pinctrl-names = "default";
+
+        status = "okay";
+};
diff --git a/arch/arm/boot/dts/r8a7745.dtsi b/arch/arm/boot/dts/r8a7745.dtsi
index 88f93ef..28d82a6 100644
--- a/arch/arm/boot/dts/r8a7745.dtsi
+++ b/arch/arm/boot/dts/r8a7745.dtsi
@@ -1455,6 +1455,61 @@
		status = "disabled";
	};

+        pwm0: pwm@e6e30000 {
+                compatible = "renesas,pwm-rcar";
+                reg = <0 0xe6e30000 0 0x08>;
+                clocks = <&mstp5_clks R8A7745_CLK_PWM>;
+                status = "disabled";
+                #pwm-cells = <2>;
+        };
+
+        pwm1: pwm@e6e31000 {
+               compatible = "renesas,pwm-rcar";
+                reg = <0 0xe6e31000 0 0x08>;
+                clocks = <&mstp5_clks R8A7745_CLK_PWM>;
+                status = "disabled";
+                #pwm-cells = <2>;
+        };
+
+        pwm2: pwm@e6e32000 {
+                compatible = "renesas,pwm-rcar";
+                reg = <0 0xe6e32000 0 0x08>;
+                clocks = <&mstp5_clks R8A7745_CLK_PWM>;
+                status = "disabled";
+                #pwm-cells = <2>;
+        };
+
+        pwm3: pwm@e6e33000 {
+                compatible = "renesas,pwm-rcar";
+                reg = <0 0xe6e33000 0 0x08>;
+                clocks = <&mstp5_clks R8A7745_CLK_PWM>;
+                status = "disabled";
+                #pwm-cells = <2>;
+        };
+        pwm4: pwm@e6e34000 {
+                compatible = "renesas,pwm-rcar";
+                reg = <0 0xe6e34000 0 0x08>;
+                clocks = <&mstp5_clks R8A7745_CLK_PWM>;
+                status = "disabled";
+                #pwm-cells = <3>;
+        };
+
+        pwm5: pwm@e6e35000 {
+                compatible = "renesas,pwm-rcar";
+                reg = <0 0xe6e35000 0 0x08>;
+                clocks = <&mstp5_clks R8A7745_CLK_PWM>;
+                status = "disabled";
+                #pwm-cells = <3>;
+        };
+
+        pwm6: pwm@e6e36000 {
+                compatible = "renesas,pwm-rcar";
+                reg = <0 0xe6e36000 0 0x08>;
+                clocks = <&mstp5_clks R8A7745_CLK_PWM>;
+                status = "disabled";
+                #pwm-cells = <2>;
+        };
+
	rcar_sound: sound@ec500000 {
		/*
		 * #sound-dai-cells is required
--
1.9.1

